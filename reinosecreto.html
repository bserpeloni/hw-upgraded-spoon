<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>O Reino Secreto: Missões</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@700&family=Source+Code+Pro:wght@300;400&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Night Mission -->
    <!-- Application Structure Plan: A filterable card gallery structure was chosen, consistent with the other apps for a unified user experience. Each card represents a single public mission for the Corno. The theme is a "secret agent dossier," with a modern, clean aesthetic. A top filter bar allows the Queen to sort missions by category (Discrição, Interação, Exposição, Resistência), enabling her to choose a challenge that fits the day's opportunities and risk level. Clicking a card opens a modal with the full mission briefing (mission, proof, reward, consequence). This structure supports a direct user flow: 1. Filter by mission type. 2. Browse missions. 3. Select one for the detailed briefing. 4. Queen gives the order. 5. Corno marks as complete later. -->
    <!-- Visualization & Content Choices: 
        - Report Info: A large list of individual public challenges -> Goal: Organize & Explore -> Presentation: Interactive Card Gallery (HTML/Tailwind) -> Interaction: Click to open modal, filter by category. State change on completion. -> Justification: Card gallery is optimal for browsing a large set of distinct items. Filtering is essential for usability.
        - Report Info: Detailed mission rules (proof, reward, consequence) -> Goal: Inform -> Presentation: Text blocks within a modal window -> Interaction: Modal appears on card click. -> Justification: The modal provides a focused, "top secret file" view for the mission briefing.
        - Report Info: Challenge categories -> Goal: Filter -> Presentation: Filter buttons -> Interaction: Click to dynamically re-render the card gallery. -> Justification: Intuitive UI pattern for sorting content.
        - Report Info: Overall progress -> Goal: Synthesize -> Viz: Polar Area Chart (Chart.js/Canvas) -> Interaction: Updates automatically. -> Justification: A polar area chart provides a visually interesting "radar" or "spider chart" look, fitting the spy theme, to show progress across different mission categories.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Source Code Pro', monospace;
            background-image: url('https://images.pexels.com/photos/316093/pexels-photo-316093.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            color: #f5f5f5;
        }
        h1, h2, h3, .font-title {
            font-family: 'Roboto Condensed', sans-serif;
            font-weight: 700;
            letter-spacing: 0.05em;
        }
        .card {
            background-color: rgba(10, 20, 40, 0.85);
            border: 1px solid #2c3e50;
            color: #ecf0f1;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px -5px rgba(52, 152, 219, 0.2);
        }
        .card.completed {
            background-color: rgba(44, 62, 80, 0.7);
            opacity: 0.6;
        }
        .filter-btn {
            background-color: rgba(255, 255, 255, 0.1);
            border: 2px solid #3498db;
            color: #f5f5f5;
        }
        .filter-btn:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        .filter-btn.active {
            background-color: #3498db;
            color: #ffffff;
            border-color: #3498db;
        }
        .modal-backdrop {
            transition: opacity 0.3s ease;
        }
        .modal-content {
            transition: transform 0.3s ease;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 400px;
        }
        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
        .section-bg {
            background-color: rgba(10, 20, 40, 0.9);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border: 1px solid #2c3e50;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8 py-4 rounded-lg section-bg shadow-lg">
            <h1 class="text-5xl md:text-7xl text-white uppercase">O Reino Secreto</h1>
            <p class="text-lg text-gray-300 mt-2">Dossier de Missões Públicas do Meu Servo.</p>
        </header>

        <section class="mb-8 p-6 rounded-lg shadow-lg section-bg">
            <h2 class="text-3xl text-center mb-4 text-white">Manual de Operações</h2>
            <div class="text-left text-gray-300 space-y-2 max-w-4xl mx-auto">
                <div class="border-t border-gray-700 pt-2">
                    <button class="collapsible-trigger w-full flex justify-between items-center text-left">
                        <h3 class="font-semibold text-lg text-white">As Regras do Jogo</h3>
                        <span class="transform transition-transform duration-300 text-2xl font-light">＋</span>
                    </button>
                    <div class="collapsible-content mt-2 text-sm">
                        <ol class="list-decimal list-inside space-y-1 pt-2">
                            <li><strong>A Ordem da Rainha:</strong> A Rainha escolhe uma missão do dossier para o seu Corno.</li>
                            <li><strong>A Execução Secreta:</strong> O Corno deve cumprir a missão em público, mantendo o segredo a todo o custo.</li>
                            <li><strong>A Prova:</strong> Ele deve obter a prova exigida (foto, narração, etc.) e apresentá-la à Rainha.</li>
                            <li><strong>O Julgamento:</strong> Se a missão for bem-sucedida, ele recebe a "Recompensa". Se falhar, sofre a "Consequência".</li>
                        </ol>
                    </div>
                </div>
                 <div class="border-t border-gray-700 pt-2">
                    <button class="collapsible-trigger w-full flex justify-between items-center text-left">
                        <h3 class="font-semibold text-lg text-red-400">Consequência Suprema: O Ritual da Limpeza Íntima</h3>
                        <span class="transform transition-transform duration-300 text-2xl font-light text-red-400">＋</span>
                    </button>
                    <div class="collapsible-content mt-2 text-sm">
                        <p class="mb-2">Esta punição é reservada para a falha em qualquer missão de **Nível Ouro** ou superior, ou pode ser decretada pela Rainha em caso de insolência grave.</p>
                        <ol class="list-decimal list-inside space-y-1 pt-2">
                            <li><strong>A Prova da Fraqueza:</strong> A Rainha ordena que o Corno se masturbe e goze no seu próprio corpo (barriga e peito).</li>
                            <li><strong>A Ferramenta da Rainha:</strong> A Rainha apresenta a "ferramenta de limpeza": uma calcinha que ela usou.</li>
                            <li><strong>A Limpeza e a Adoração:</strong> O Corno deve usar a calcinha dela para limpar a sua própria porra e, em seguida, chupar a calcinha até que ela esteja limpa, provando o sabor da sua submissão.</li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>

        <div id="filter-container" class="flex flex-wrap justify-center gap-2 mb-8">
            <!-- Filter buttons will be generated here -->
        </div>

        <main id="challenge-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            <!-- Challenge cards will be generated here -->
        </main>

        <section class="mt-12 p-6 rounded-lg shadow-xl section-bg">
             <h2 class="text-4xl text-center mb-6 text-white">Análise de Performance</h2>
             <div class="chart-container">
                <canvas id="progressChart"></canvas>
            </div>
             <div class="mt-6 text-center">
                <button id="reset-button" class="bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors">Apagar Dossier</button>
            </div>
        </section>
    </div>

    <!-- Modal -->
    <div id="challenge-modal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50 hidden modal-backdrop opacity-0">
        <div class="bg-[#0a1428] border border-gray-700 rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto modal-content scale-95">
            <div id="modal-content-inner" class="p-8">
                <!-- Modal content will be injected here -->
            </div>
        </div>
    </div>

    <script>
        const challenges = [
            // Categoria: Discrição
            { id: 1, name: "A Calcinha Secreta", category: "Discrição", level: "Prata", mission: "Usar uma calcinha dela por baixo da sua roupa durante um dia inteiro de trabalho.", proof: "Foto discreta no banheiro do trabalho.", reward: "Ela te deixará escolher a calcinha que ela usará no próximo encontro.", consequence: "Você lava todas as calcinhas dela à mão." },
            { id: 3, name: "As Pernas de Seda", category: "Discrição", level: "Prata", mission: "Usar meias 7/8 e cinta-liga sob a calça durante uma saída casual.", proof: "Foto no banheiro do local.", reward: "Sessão de adoração às suas pernas.", consequence: "Você veste a fantasia de empregada para limpar a casa." },
            { id: 5, name: "O Aroma Dela", category: "Discrição", level: "Bronze", mission: "Usar um perfume dela num compromisso social.", proof: "Mensagem de texto descrevendo a sensação.", reward: "Ela te permitirá aplicar o perfume nela.", consequence: "Você limpa todos os frascos de perfume dela." },
            { id: 22, name: "O Segredo no Carro", category: "Discrição", level: "Bronze", mission: "Colocar um adesivo secreto (escolhido por ela) dentro do seu carro.", proof: "Foto do adesivo aplicado.", reward: "Ela fará sexo oral em você dentro do carro.", consequence: "Você limpa o interior do carro dela." },
            { id: 26, name: "A Foto do Manequim", category: "Discrição", level: "Bronze", mission: "Tirar foto de um manequim com lingerie e enviar a ela.", proof: "A foto enviada.", reward: "Ela comprará a peça e a vestirá para você.", consequence: "Você fica como um manequim por 10 minutos." },
            { id: 28, name: "O Totem no Bolso", category: "Discrição", level: "Bronze", mission: "Carregar um tubo de batom dela no bolso o dia todo.", proof: "Foto do batom no seu bolso.", reward: "Ela deixará marcas de beijo em você.", consequence: "Você organiza a maquiagem dela." },
            { id: 37, name: "A Troca de Lingerie", category: "Discrição", level: "Prata", mission: "Sair com um conjunto de lingerie e, no meio do dia, trocá-lo por outro num banheiro público.", proof: "O conjunto de lingerie 'sujo' entregue a ela.", reward: "Ela te deixará escolher qual dos dois conjuntos ela usará para você.", consequence: "Você lava os dois conjuntos à mão." },
            { id: 56, name: "A Pedicure Escondida", category: "Discrição", level: "Bronze", mission: "Pinte as unhas dos seus pés com um esmalte vibrante. Vá para o seu dia usando sapatos fechados, carregando o segredo nos seus pés.", proof: "Foto dos seus pés com as unhas pintadas.", reward: "Ela fará uma massagem nos seus pés, adorando a sua 'decoração'.", consequence: "Você terá que fazer a pedicure dela." },
            { id: 57, name: "A Tatuagem Íntima", category: "Discrição", level: "Prata", mission: "Ela aplicará uma tatuagem temporária de 'QoS' na sua virilha ou coxa. Carregue a marca de propriedade dela na sua pele o dia todo.", proof: "Uma foto nítida da tatuagem aplicada.", reward: "Ela irá 'inspecionar' a marca de perto, usando a língua para contornar o desenho.", consequence: "Você terá que aplicar uma segunda tatuagem em outro local." },
            { id: 58, name: "A Calcinha de Renda", category: "Discrição", level: "Prata", mission: "Use a calcinha de renda mais delicada e 'inapropriada' que ela tiver durante uma saída casual.", proof: "Selfie no banheiro mostrando a calcinha.", reward: "Ela te dará o direito de escolher qual calcinha ela usará na próxima vez.", consequence: "Você terá que lavar à mão todas as calcinhas de renda dela." },
            { id: 59, name: "O Hidratante Dela", category: "Discrição", level: "Bronze", mission: "Use o hidratante corporal perfumado dela no seu corpo todo. Passe o dia sentindo o cheiro feminino dela a emanar da sua própria pele.", proof: "Sua narração da experiência.", reward: "Ela aplicará mais hidratante em você, com uma massagem lenta.", consequence: "Você terá que fazer massagem nos pés dela." },
            { id: 60, name: "O Batom nos Mamilos", category: "Discrição", level: "Prata", mission: "Ela aplicará o batom vermelho dela nos seus mamilos. Passe o dia com os mamilos marcados por baixo da sua camisa.", proof: "Uma foto dos seus mamilos marcados antes de se vestir.", reward: "Ela lamberá o batom dos seus mamilos ao final do dia.", consequence: "Você fica proibido de tocar nos seus próprios mamilos por 24 horas." },
            { id: 61, name: "A Joia Escondida", category: "Discrição", level: "Ouro", mission: "Use um plug anal com uma base de joia/cristal (pequeno o suficiente para ficar escondido) durante todo o seu dia de trabalho ou saída.", proof: "Uma foto do plug antes de sair.", reward: "Ela te foderá de quatro, para que a joia brilhe para ela.", consequence: "Você terá que polir todas as joias dela." },
            { id: 62, name: "A Depilação do Servo", category: "Discrição", level: "Prata", mission: "Depile completamente uma única parte do seu corpo que ela determinar (ex: apenas sua nádega direita). É uma marca de modificação que só ela conhece.", proof: "Uma foto da área depilada.", reward: "Ela passará óleo e massageará a sua pele lisa.", consequence: "Você terá que depilar as pernas dela." },
            { id: 63, name: "As Bolas de Gueixa", category: "Discrição", level: "Prata", mission: "Use um par de bolas de Ben Wa durante uma caminhada num parque ou ida às compras. O desafio é o movimento e peso interno constante.", proof: "Sua narração da experiência.", reward: "Ela usará as bolas em si mesma e te deixará ouvi-las enquanto se move.", consequence: "Você deve fazer 50 agachamentos." },
            { id: 64, name: "A Prova Íntima", category: "Discrição", level: "Ouro", mission: "Use, durante uma saída casual, a calcinha que sua Rainha usou para dormir na noite anterior ou na qual ela gozou.", proof: "Uma selfie no banheiro, segurando a parte da frente da calcinha contra seu nariz.", reward: "Ela te permitirá cheirar a calcinha que ela está usando no momento.", consequence: "Você lava a calcinha usada à mão." },
            { id: 65, name: "O Segredo do Cetim", category: "Discrição", level: "Prata", mission: "Use a calcinha de cetim ou seda mais luxuosa que ela tiver durante uma saída casual. O desafio é a sensação do tecido liso e escorregadio.", proof: "Uma foto da calcinha antes de se vestir.", reward: "Ela usará a calcinha como um 'pano' para te polir.", consequence: "Você terá que lustrar todos os sapatos dela." },
            { id: 66, name: "A Virilha Lisa", category: "Discrição", level: "Prata", mission: "Faça a depilação completa da sua área genital e virilha e saia para um compromisso sentindo a sua pele completamente lisa.", proof: "Uma foto da sua virilha lisa (sem mostrar o pênis).", reward: "Ela fará sexo oral em você, explorando a sua nova suavidade.", consequence: "Você terá que fazer a depilação das axilas dela." },
            { id: 67, name: "A Armadura de Renda", category: "Discrição", level: "Prata", mission: "Use o 'conjunto base' completo por baixo da sua roupa: uma calcinha de renda grande, a cinta-liga e as meias 7/8.", proof: "Uma foto de corpo inteiro com o conjunto antes de se vestir.", reward: "Ela te despirá lentamente, peça por peça.", consequence: "Você lava à mão o conjunto completo." },
            { id: 68, name: "O Fio-Dental e o Plug", category: "Discrição", level: "Ouro", mission: "Use a sua calcinha fio-dental mais fina e pequena juntamente com um plug anal durante uma saída casual.", proof: "Uma foto no banheiro mostrando a combinação.", reward: "Ela te dará um orgasmo usando apenas o plug, sem tocar no seu pênis.", consequence: "Você deve usar o plug para dormir." },
            { id: 69, name: "A Promessa da Cinta-Liga", category: "Discrição", level: "Bronze", mission: "Use apenas a cinta-liga por baixo das suas calças, sem as meias. As presilhas soltas são um lembrete da 'promessa' de se vestir completamente mais tarde.", proof: "Uma foto da cinta-liga na sua cintura.", reward: "Ela mesma prenderá as meias na cinta-liga quando você chegar.", consequence: "Você terá que organizar todas as meias dela." },
            { id: 70, name: "O Abraço da Renda", category: "Discrição", level: "Prata", mission: "Use uma meia-calça de renda completa por baixo das suas calças durante todo o dia.", proof: "Uma foto sua no banheiro, com as calças abaixadas, mostrando a meia-calça.", reward: "Ela rasgará a meia-calça do seu corpo para ter acesso a você.", consequence: "Você terá que comprar uma nova meia-calça para ela." },
            // Categoria: Resistência
            { id: 2, name: "O Plug no Supermercado", category: "Resistência", level: "Prata", mission: "Usar um plug anal (pequeno e confortável) durante as compras da semana.", proof: "Selfie discreta num dos corredores.", reward: "Massagem na sua próstata até ao orgasmo.", consequence: "Você usa o plug por mais duas horas em casa." },
            { id: 7, name: "O Guardião da Chave", category: "Resistência", level: "Prata", mission: "Usar o cinto de castidade numa saída casual (cinema, shopping).", proof: "Foto sua no local.", reward: "Ao voltar, você será libertado com um sexo oral lento.", consequence: "A castidade será estendida por mais 24 horas." },
            { id: 13, name: "O Cinema Interativo", category: "Resistência", level: "Ouro", mission: "Ir ao cinema sozinho usando um plug vibratório que ela controlará remotamente.", proof: "O bilhete do cinema.", reward: "Você ganha o controle do vibrador dela por uma noite.", consequence: "Você usa o plug (desligado) para dormir." },
            { id: 31, name: "O Dia da Calcinha Aberta", category: "Resistência", level: "Ouro", mission: "Passar um dia inteiro usando uma calcinha com abertura.", proof: "Selfie no banheiro mostrando a calcinha.", reward: "Sessão de sexo onde ela explora a 'acessibilidade' da peça.", consequence: "Você usa a calcinha mais restritiva no dia seguinte." },
            { id: 32, name: "O Dia do Espartilho Secreto", category: "Resistência", level: "Ouro", mission: "Usar um espartilho (corset) por baixo da sua camisa de trabalho o dia todo.", proof: "Sua narração sobre a sensação de restrição.", reward: "Ela te despirá lentamente, peça por peça.", consequence: "Você fica proibido de se deitar no sofá por uma noite." },
            { id: 33, name: "A Gaiola Enjaulada", category: "Resistência", level: "Ouro", mission: "Usar uma calcinha de renda justa por cima do seu cinto de castidade durante todo o dia.", proof: "Foto da combinação.", reward: "Ela te masturbará através das grades da gaiola.", consequence: "A castidade é estendida por mais 12 horas." },
            { id: 34, name: "O Dia do Body Secreto", category: "Resistência", level: "Ouro", mission: "Usar um body (ou collant) de renda por baixo da sua roupa de trabalho o dia inteiro.", proof: "Sua descrição da sensação de estar 'abraçado'.", reward: "Ela te dará um banho, ensaboando cada parte do seu corpo.", consequence: "Você lava à mão o body que usou." },
            { id: 35, name: "O Uniforme Completo da Propriedade", category: "Resistência", level: "Ouro", mission: "Usar o 'uniforme completo' (castidade, plug, lingerie, meias) por baixo da sua roupa o dia todo.", proof: "Foto de corpo inteiro com o uniforme antes de se vestir.", reward: "Uma noite de adoração onde ela removerá cada peça lentamente.", consequence: "Você deve lavar e guardar cada peça do uniforme." },
            { id: 49, name: "O Body Translúcido", category: "Resistência", level: "Ouro", mission: "Sua tarefa é usar um body de renda ou tule (semi-transparente) por baixo de uma camisa de trabalho ou social, mantendo o colarinho um pouco mais aberto que o normal.", proof: "Uma selfie no espelho do banheiro, onde a luz de fundo revele sutilmente a textura da renda através da camisa.", reward: "Ela te dará o direito de escolher qual body ela usará na próxima noite, e ela fará um strip-tease lento para você.", consequence: "Você terá que lavar à mão todos os bodies e peças delicadas dela." },
            { id: 50, name: "O Abraço da Rainha", category: "Resistência", level: "Prata", mission: "Sua missão é usar um body modelador (shapewear), de preferência um tamanho um pouco justo, durante todo o dia de trabalho.", proof: "Sua narração detalhada, ao final do dia, sobre a sensação constante de compressão e contenção.", reward: "Ela te dará uma massagem relaxante e sensual, 'libertando' seu corpo do abraço apertado.", consequence: "Você terá que usar a peça por mais duas horas em casa, mas desta vez, sem a sua roupa por cima." },
            // Outras categorias...
            { id: 6, name: "O Consultor de Prazer", category: "Interação", level: "Prata", mission: "Ir a um sex shop e pedir recomendação de um vibrador para a 'esposa'.", proof: "Cartão de visita da loja e nome do produto.", reward: "Ela te dará um sexo oral enquanto você descreve o produto.", consequence: "Você assiste a um review do produto sem se tocar." },
            { id: 10, name: "O Arquivista de Conquistas", category: "Servidão", level: "Bronze", mission: "Sob a supervisão dela, arquivar as fotos picantes dos 'amigos' dela no celular dela.", proof: "A pasta criada e organizada.", reward: "Ela te deixará escolher uma das fotos para ela recriar para você.", consequence: "Você limpa a tela e a capa do celular dela." },
            { id: 11, name: "A Prova no Provador", category: "Exposição", level: "Prata", mission: "Levar uma lingerie dela escondida e tirar uma foto com ela num provador de loja.", proof: "A selfie de dentro do provador.", reward: "Roleplay de 'sissy pessoal', onde ela te vestirá.", consequence: "Você usa a peça por baixo da roupa na próxima saída." },
            { id: 12, name: "A Chave em Exposição", category: "Exposição", level: "Ouro", mission: "Sair para jantar com ela enquanto ela usa a chave da sua castidade como um colar visível.", proof: "Sua compostura durante o jantar.", reward: "Você será libertado da castidade de forma criativa.", consequence: "A chave permanece no colar dela por mais 24 horas." },
            { id: 14, name: "O Acessório Revelador", category: "Exposição", level: "Bronze", mission: "Usar uma tornozeleira em público, com uma calça que a deixe sutilmente à mostra.", proof: "Foto da tornozeleira visível.", reward: "Sessão de adoração aos seus pés.", consequence: "Você usa a tornozeleira em casa por 48 horas." },
            { id: 16, name: "A Reserva em Nome Dela", category: "Servidão", level: "Prata", mission: "Fazer pessoalmente a reserva de um restaurante para um futuro encontro dela.", proof: "O comprovante da reserva.", reward: "Ela te contará detalhes do encontro.", consequence: "Você serve o jantar dela vestido de garçom." },
            { id: 17, name: "A Mensagem de Texto Arriscada", category: "Exposição", level: "Ouro", mission: "Enviar a ela uma foto da sua virilha (com calcinha dela) tirada de um banheiro público.", proof: "A foto enviada.", reward: "Ela enviará de volta uma foto arriscada do próximo encontro dela.", consequence: "Você fica proibido de tocar no corpo dela por 24 horas." },
            { id: 18, name: "A Caminhada da Submissão", category: "Exposição", level: "Ouro", mission: "Caminhar à noite usando uma saia por baixo de um casaco comprido.", proof: "Vídeo curto da caminhada.", reward: "Você escolhe a fantasia que ela usará na próxima noite.", consequence: "Você usa a saia em casa pelo resto da noite." },
            { id: 19, name: "A Transparência Sutil", category: "Exposição", level: "Prata", mission: "Vestir uma camiseta branca translúcida com um sutiã de renda preto por baixo num dia de sol.", proof: "Selfie discreta num local externo.", reward: "Ela usará o mesmo sutiã, sem a camiseta, para você em casa.", consequence: "Você lava à mão todos os sutiãs dela." },
            { id: 21, name: "A Prova de Coragem", category: "Interação", level: "Bronze", mission: "Entrar numa loja de fantasias e pedir para ver as de 'empregada francesa'.", proof: "O nome da loja e o preço.", reward: "Ela comprará a fantasia para você.", consequence: "Você usa um avental por um dia em casa." },
            { id: 23, name: "O Desafio do Elevador", category: "Exposição", level: "Prata", mission: "Deixar uma chave cair no elevador para se abaixar, sabendo que a calcinha pode marcar.", proof: "Sua narração detalhada.", reward: "Orgasmo rápido contra a porta de casa.", consequence: "Você sobe 10 lances de escada." },
            { id: 24, name: "O Motorista da Rainha", category: "Servidão", level: "Ouro", mission: "Levá-la de carro até o local de um encontro com um 'amigo'.", proof: "Selfie no carro após deixá-la.", reward: "Ela te ligará para te provocar.", consequence: "Você será o motorista dela por uma semana." },
            { id: 25, "name": "O Toque Público", "category": "Exposição", "mission": "Tocar discretamente no seu plug ou cinto de castidade em público sob um sinal dela.", "proof": "A observação direta dela.", "reward": "Beijo apaixonado em público.", "consequence": "Você será ignorado por ela pelo resto da saída." },
            { id: 27, name: "A Prova de Lealdade", category: "Servidão", level: "Ouro", mission: "Enviar uma mensagem para um 'amigo' dela, a mando dela, marcando um encontro.", proof: "O print da mensagem enviada.", reward: "Você lerá a resposta do 'amigo'.", consequence: "Você escreve 100 vezes: 'A felicidade da minha Rainha é minha prioridade'." },
            { id: 29, name: "O Teste de Coragem no Sex Shop", category: "Interação", level: "Prata", mission: "Entrar num sex shop e tirar foto do seu plug preferido.", proof: "A foto do plug na loja.", reward: "Ela comprará o plug para você.", consequence: "Você fica uma semana sem usar plugs." },
            { id: 30, name: "A Caminhada da Vergonha Elegante 2.0", category: "Exposição", level: "Prata", mission: "Caminhar à noite usando salto alto por baixo de uma calça jeans larga.", proof: "Áudio de 1 minuto da caminhada.", reward: "Massagem completa nos seus pés.", consequence: "Você faz massagem nos pés dela." },
            { id: 36, name: "O Porta-Chaves da Putinha", category: "Exposição", level: "Ouro", mission: "Usar um porta-chaves exageradamente feminino para suas chaves normais o dia todo.", proof: "Foto do porta-chaves em uso (ex: na ignição do carro).", reward: "Ela te dará a chave da castidade como um 'prêmio' por uma hora.", consequence: "Você lustra todas as chaves da casa." },
            { id: 38, name: "A Sobremesa Secreta", category: "Fetiches", level: "Prata", mission: "Num café, levar sua sobremesa para o banheiro e aplicar um pouco de chantilly na ponta da sua gaiola de castidade.", proof: "Sua narração da operação secreta.", reward: "Ela te alimentará com sobremesa na boca.", consequence: "Você fica sem sobremesa por uma semana." },
            { id: 39, name: "O Perfume nos Testículos", category: "Fetiches", level: "Prata", mission: "Aplicar o perfume dela diretamente nos seus testículos pela manhã.", proof: "A confirmação olfativa dela quando chegar em casa.", reward: "Ela lamberá o perfume do seu corpo.", consequence: "Você fica proibido de gozar por 24 horas." },
            { id: 40, name: "O Enxoval do Corno", category: "Aquisição", level: "Ouro", mission: "Ir a uma loja (usando calcinha dela), comprar um conjunto para ela e três calcinhas para si. Deve dizer à vendedora: 'A minha esposa gosta de renda transparente, com pouca cobertura. Ela tem um corpo incrível e gosta de mostrá-lo.'", proof: "Selfie na loja, nota fiscal, e narração da conversa.", reward: "Ela fará um 'desfile de moda' com o conjunto novo, e depois te deixará experimentar as suas novas calcinhas.", consequence: "Você fica proibido de usar as calcinhas novas por um mês." },
            { id: 41, name: "A Compra do Batom Vermelho", category: "Aquisição", level: "Ouro", mission: "Vá a uma loja de cosméticos e peça ajuda a uma vendedora para encontrar 'o batom vermelho perfeito para uma noite muito especial'. Compre o que ela recomendar.", proof: "O batom novo e a sua narração da interação.", reward: "Ela usará o batom que você comprou e te deixará marcas de beijo pelo corpo.", consequence: "Você terá que usar o batom em casa por uma noite inteira." },
            { id: 42, name: "A Encomenda da Rainha", category: "Aquisição", level: "Ouro", mission: "Ela te dará o nome de um brinquedo sexual específico. Sua missão é ir a um sex shop e pedir por este item exato pelo nome.", proof: "O brinquedo na sacola da loja, a nota fiscal, e uma foto sua em frente ao sex shop antes de entrar.", reward: "Ela estreará o novo brinquedo em você naquela mesma noite.", consequence: "Você fica proibido de usar qualquer brinquedo sexual por uma semana." },
            { id: 43, name: "O Segredo das Pernas", category: "Aquisição", level: "Prata", mission: "Vá a uma loja de departamentos e compre uma meia-calça de renda para você. Se o caixa perguntar, diga que 'é um presente para a namorada'.", proof: "A meia-calça nova, a nota fiscal, e uma foto sua no provador vestindo a meia-calça por baixo das suas calças.", reward: "Ela te ajudará a vestir a meia-calça e te permitirá usá-la na próxima saída de vocês juntos.", consequence: "Você terá que lavar à mão todas as meias dela." },
            { id: 44, name: "A Compra da Inocência", category: "Aquisição", level: "Prata", mission: "Vá a uma loja e compre uma calcinha branca de algodão, no seu tamanho. Diga à vendedora que é para 'uma aposta que perdeu'.", proof: "A calcinha nova e a narração da interação.", reward: "Ela te fará usar a calcinha 'inocente' enquanto te dá o castigo mais pervertido que conseguir imaginar.", consequence: "Você deve usar a calcinha de algodão para dormir por uma semana." },
            { id: 45, name: "O Catálogo Online", category: "Aquisição", level: "Bronze", mission: "Sua missão é passar uma hora a navegar em sites de lingerie e sex shops. Você deve montar um 'carrinho de compras' com pelo menos 5 itens que você gostaria de usar para ela. Envie o print do carrinho.", proof: "O print do carrinho de compras.", reward: "Ela escolherá um dos itens do seu carrinho e o comprará para você.", consequence: "Você fica proibido de se masturbar por 48 horas." },
            { id: 46, name: "A Compra da Renda Cheia", category: "Aquisição", level: "Prata", mission: "Sua coleção precisa de variedade. Vá a uma loja de lingerie e compre uma calcinha de renda que cubra todo o bumbum (modelo 'boyshorts' ou 'biquíni'). Diga à vendedora que 'é para uma noite mais romântica e menos vulgar'.", proof: "A calcinha nova e a narração da sua interação com a vendedora.", reward: "Ela te fará usar a nova calcinha enquanto te dá uma massagem sensual.", consequence: "Você terá que usar a calcinha por baixo da sua roupa de trabalho no dia seguinte." },
            { id: 47, name: "O Toque de Cetim", category: "Aquisição", level: "Prata", mission: "Sua missão é comprar a calcinha de cetim ou seda mais luxuosa que encontrar no seu tamanho. O desafio é a interação: você deve perguntar à vendedora sobre a 'sensação do tecido na pele'.", proof: "A calcinha de cetim, a nota fiscal, e uma foto sua no provador sentindo o tecido contra sua pele.", reward: "Ela usará a calcinha como um 'pano' para te polir, esfregando o tecido macio por todo o seu corpo.", consequence: "Você terá que lustrar todos os sapatos dela." },
            { id: 48, name: "O Uniforme Incompleto", category: "Aquisição", level: "Ouro", mission: "Vá a uma loja de fantasias e compre apenas a calcinha de um uniforme (ex: a calcinha de enfermeira, de colegial). Você deve explicar ao caixa que 'é só a peça que faltava para completar a fantasia'.", proof: "A calcinha temática e sua narração da compra.", reward: "Ela usará a fantasia completa correspondente e te usará como seu 'paciente' ou 'aluno' travesso.", consequence: "Você deve usar a calcinha temática para dormir por uma semana." },
            { id: 51, name: "A Compra da Transparência Total", category: "Aquisição", level: "Ouro", mission: "Vá a uma loja de lingerie e peça à vendedora: 'Estou à procura de uma calcinha que seja o mais transparente possível. Quero algo que não deixe nada para a imaginação.'", proof: "A calcinha de tule e uma foto sua no provador segurando-a contra a luz.", reward: "Ela te fará usar a calcinha transparente enquanto ela te provoca, sem te tocar.", consequence: "Você deve usar a calcinha transparente para dormir." },
            { id: 52, name: "A Encomenda das Tiras", category: "Aquisição", level: "Ouro", mission: "Sua tarefa é comprar uma calcinha estilo 'cage' (com tiras). Ao interagir com a vendedora, você deve perguntar: 'Estas tiras são ajustáveis? Preciso que fiquem bem apertadas.'", proof: "A calcinha de tiras, a nota fiscal, e uma foto sua no provador tentando entender como vesti-la.", reward: "Ela usará as tiras da calcinha para te prender ou te dar palmadas.", consequence: "Você deve usar a calcinha de tiras por baixo da sua roupa de trabalho." },
            { id: 53, name: "O Tesouro de Pérolas", category: "Aquisição", level: "Ouro", mission: "Vá a um sex shop e peça diretamente: 'Vocês têm calcinhas com pérolas?'. Se o vendedor perguntar sobre o uso, responda: 'É para uma ocasião... especial.'", proof: "A calcinha de pérolas e uma foto sua segurando-a dentro da loja.", reward: "Ela te fará usar a calcinha enquanto ela te masturba, usando as pérolas para te levar ao limite.", consequence: "Você fica proibido de gozar por 24 horas." },
            { id: 54, name: "O Charme Retrô", category: "Aquisição", level: "Prata", mission: "Procure por uma calcinha de cintura alta, estilo vintage. A sua desculpa para a vendedora: 'A minha esposa adora o estilo dos anos 50.'", proof: "A calcinha de cintura alta e uma selfie sua no provador vestindo a peça, com uma pose de pin-up.", reward: "Ela fará um roleplay de 'pin-up', onde você é o fotógrafo submisso.", consequence: "Você terá que assistir a um filme dos anos 50 que ela escolher." },
            { id: 55, name: "A Inocência dos Babados", category: "Aquisição", level: "Prata", mission: "Encontre a calcinha com mais babados e laços que conseguir. Ao comprar, você deve dizer ao caixa: 'É para me fazer sentir... bonito.'", proof: "Uma selfie sua com uma expressão tímida, segurando a calcinha de babados na loja.", reward: "Ela te tratará como a 'menininha' dela por uma noite, com direito a penteados e ordens infantis.", consequence: "Você terá que usar a calcinha de babados com uma fantasia de colegial." },
            { id: 56, name: "A Compra do Body de Renda", category: "Aquisição", level: "Ouro", mission: "Vá a uma loja de lingerie e escolha um body de renda preta no seu tamanho. Ao pedir ajuda a uma vendedora, você deve perguntar: 'Este modelo oferece uma boa sustentação? É para usar por baixo de uma roupa de trabalho.'", proof: "O body novo e sua narração da interação.", reward: "Ela te fará usar o body como peça única em casa por uma noite inteira.", consequence: "Você deve lavar o body à mão." },
            { id: 57, name: "A Encomenda da Calcinha Aberta", category: "Aquisição", level: "Ouro", mission: "Vá a um sex shop ou a uma loja de lingerie mais ousada e peça diretamente: 'Com licença, estou à procura de uma calcinha com abertura na virilha (crotchless). Pode me mostrar as opções?'", proof: "A calcinha aberta, a nota fiscal, e uma foto sua segurando a peça na loja com uma expressão de choque e desejo.", reward: "Ela te fará usar a calcinha enquanto te dá um sexo oral através da abertura.", consequence: "Você fica proibido de usar qualquer outra calcinha por uma semana." },
            { id: 58, name: "O Kit de Noiva", category: "Aquisição", level: "Ouro", mission: "Sua tarefa é comprar um conjunto de lingerie de noiva: calcinha branca de renda, cinta-liga e meias brancas 7/8. A desculpa para a vendedora: 'É para a despedida de solteira de uma amiga.'", proof: "O conjunto de noiva completo e uma foto sua no provador com a cinta-liga e as meias brancas.", reward: "Ela fará um roleplay de 'noite de núpcias', onde você é a noiva virgem e ela, a dominadora experiente.", consequence: "Você terá que usar as meias brancas por baixo da sua roupa de trabalho." },
            { id: 59, name: "A Devolução Humilhante", category: "Interação", level: "Ouro", mission: "Pegue uma das calcinhas que você já comprou e usou. Volte à loja com a nota fiscal e peça para 'trocar', com a desculpa de que 'o tamanho não ficou bom'. Entregue a calcinha à(ao) caixa para inspeção.", proof: "Sua narração detalhada da (provável) recusa da loja.", reward: "Ela irá elogiá-lo pela sua coragem e te dará um orgasmo como prêmio.", consequence: "Você terá que usar a calcinha 'rejeitada' por 24 horas seguidas." },
            { id: 60, name: "A Compra por Foto", category: "Interação", level: "Prata", mission: "A sua Rainha lhe enviará uma foto de uma calcinha específica. A sua missão é ir a uma loja, mostrar a foto à vendedora e dizer: 'A minha esposa viu esta foto e quer este modelo exato. Vocês têm algo parecido?'", proof: "A calcinha comprada (ou uma similar) e sua narração da busca.", reward: "Ela te dará o prazer de vê-la usar a calcinha que você se esforçou tanto para encontrar.", consequence: "Você deve passar uma hora a procurar online por 5 outras calcinhas que ela possa gostar." }
        ];

        let state = {
            challenges: [],
            filter: 'Todas'
        };
        let progressChart;

        function initializeState() {
            const savedState = localStorage.getItem('reinoSecretoState');
            if (savedState) {
                state.challenges = JSON.parse(savedState);
            } else {
                state.challenges = challenges.map(c => ({ ...c, completed: false }));
            }
        }

        function saveState() {
            localStorage.setItem('reinoSecretoState', JSON.stringify(state.challenges));
        }

        function renderCards() {
            const grid = document.getElementById('challenge-grid');
            grid.innerHTML = '';
            const filteredChallenges = state.filter === 'Todas' 
                ? state.challenges 
                : state.challenges.filter(c => c.category === state.filter);

            filteredChallenges.forEach(challenge => {
                const card = document.createElement('div');
                card.className = `card p-4 rounded-lg shadow-md`;
                if (challenge.completed) {
                    card.classList.add('completed');
                }
                card.innerHTML = `
                    <div>
                        <span class="block text-xs font-bold uppercase tracking-wider text-gray-400">${challenge.category}</span>
                        <h3 class="font-title text-xl mt-1 text-white">${challenge.name}</h3>
                    </div>
                    <div class="text-right mt-4">
                        <span class="text-sm font-semibold text-[#3498db]">Ver Missão →</span>
                    </div>
                `;
                card.addEventListener('click', () => openModal(challenge.id));
                grid.appendChild(card);
            });
        }

        function renderFilters() {
            const container = document.getElementById('filter-container');
            const categories = ['Todas', ...new Set(challenges.map(s => s.category))];
            container.innerHTML = categories.map(cat => `
                <button data-filter="${cat}" class="filter-btn px-4 py-2 text-sm font-semibold rounded-full border-2 border-[#3498db] text-white hover:bg-[#3498db]">
                    ${cat}
                </button>
            `).join('');

            document.querySelectorAll('.filter-btn').forEach(btn => {
                if (btn.dataset.filter === state.filter) {
                    btn.classList.add('active');
                }
                btn.addEventListener('click', () => {
                    state.filter = btn.dataset.filter;
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    renderCards();
                });
            });
        }
        
        function openModal(id) {
            const challenge = state.challenges.find(c => c.id === id);
            const modal = document.getElementById('challenge-modal');
            const modalContent = document.getElementById('modal-content-inner');

            modalContent.innerHTML = `
                <div class="flex justify-between items-start">
                    <h2 class="text-4xl mb-2 text-white">${challenge.name}</h2>
                    <button onclick="closeModal()" class="text-3xl font-bold text-gray-400 hover:text-white">&times;</button>
                </div>
                <span class="block text-sm font-bold uppercase tracking-wider text-gray-400 mb-4">${challenge.category}</span>
                <div class="space-y-4 text-gray-300">
                    <div><strong class="font-semibold text-white block">A Missão:</strong> <p>${challenge.mission}</p></div>
                    <div><strong class="font-semibold text-white block">Prova Exigida:</strong> <p>${challenge.proof}</p></div>
                    <div><strong class="font-semibold text-white block">Recompensa da Rainha:</strong> <p>${challenge.reward}</p></div>
                    <div><strong class="font-semibold text-white block">Consequência do Servo:</strong> <p>${challenge.consequence}</p></div>
                </div>
                <div class="mt-8 flex gap-4">
                    <button onclick="toggleComplete(${id})" class="flex-1 ${challenge.completed ? 'bg-gray-700' : 'bg-[#3498db]'} text-white px-4 py-3 rounded-lg hover:opacity-80 transition-opacity">
                        ${challenge.completed ? 'Marcar como por Fazer' : 'Marcar como Concluído'}
                    </button>
                    <button onclick="closeModal()" class="flex-1 bg-gray-200 text-gray-800 px-4 py-3 rounded-lg hover:bg-gray-300 transition-colors">Fechar</button>
                </div>
            `;

            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modal.querySelector('.modal-content').classList.remove('scale-95');
            }, 10);
        }

        function closeModal() {
            const modal = document.getElementById('challenge-modal');
            modal.classList.add('opacity-0');
            modal.querySelector('.modal-content').classList.add('scale-95');
            setTimeout(() => modal.classList.add('hidden'), 300);
        }

        function toggleComplete(id) {
            const challenge = state.challenges.find(c => c.id === id);
            if (challenge) {
                challenge.completed = !challenge.completed;
                saveState();
                renderCards();
                updateChart();
                closeModal();
            }
        }
        
        function updateChart() {
            const categories = [...new Set(state.challenges.map(c => c.category))];
            const completedData = categories.map(cat => state.challenges.filter(c => c.category === cat && c.completed).length);

            if (progressChart) {
                progressChart.data.datasets[0].data = completedData;
                progressChart.update();
            }
        }

        function createChart() {
            const ctx = document.getElementById('progressChart').getContext('2d');
            const categories = [...new Set(state.challenges.map(c => c.category))];
            const completedData = categories.map(cat => state.challenges.filter(c => c.category === cat && c.completed).length);
            
            progressChart = new Chart(ctx, {
                type: 'polarArea',
                data: {
                    labels: categories,
                    datasets: [{
                        label: 'Desafios Concluídos',
                        data: completedData,
                        backgroundColor: [
                            'rgba(52, 152, 219, 0.7)',
                            'rgba(231, 76, 60, 0.7)',
                            'rgba(241, 196, 15, 0.7)',
                            'rgba(46, 204, 113, 0.7)',
                            'rgba(155, 89, 182, 0.7)',
                            'rgba(26, 188, 156, 0.7)'
                        ],
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                       r: {
                           grid: { color: 'rgba(255, 255, 255, 0.2)' },
                           ticks: {
                               color: '#f5f5f5',
                               backdropColor: 'rgba(10, 20, 40, 0.5)',
                               stepSize: 1
                           },
                       }
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { color: '#f5f5f5' }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw} concluído(s)`;
                                }
                            }
                        }
                    }
                }
            });
        }
        
        function resetGame() {
            if (confirm('Tem a certeza que deseja apagar o dossier? Todo o progresso será perdido.')) {
                localStorage.removeItem('reinoSecretoState');
                initializeState();
                renderCards();
                updateChart();
            }
        }

        document.getElementById('reset-button').addEventListener('click', resetGame);
        
        document.addEventListener('keydown', (e) => {
            if (e.key === "Escape") closeModal();
        });

        document.addEventListener('DOMContentLoaded', () => {
            initializeState();
            renderFilters();
            renderCards();
            createChart();

            document.querySelectorAll('.collapsible-trigger').forEach(button => {
                button.addEventListener('click', () => {
                    const content = button.nextElementSibling;
                    const icon = button.querySelector('span');
                    
                    if (content.style.maxHeight) {
                        content.style.maxHeight = null;
                        icon.classList.remove('rotate-45');
                    } else {
                        content.style.maxHeight = content.scrollHeight + "px";
                        icon.classList.add('rotate-45');
                    } 
                });
            });
        });
    </script>
</body>
</html>
